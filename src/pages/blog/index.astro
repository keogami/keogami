---
import Common from "@layouts/Common.astro";
import { getCollection } from "astro:content";

const blog = await getCollection("blog");
---

<style>
nav {
	display: flex;
	justify-content: center;
}

nav a {
	font-family: "Fira Code", monospace;
	color: var(--black-base);
	text-decoration: none;
	font-size: 2rem;
}

header h1 {
	font-size: 2rem;
	font-weight: 400;
}

body {
	font-family: "Fira Code", monospace;
}
</style>

<Common title="Blog">
	<nav>
		<a href="/">~|&lt;</a>
	</nav>

	<main>
		<header>
			<h1>blog posts</h1>	
		</header>

		<div id="posts">
		{[...blog, ...blog, ...blog].map(post => {
			return <section>
				<h2><a href={`/blog/${post.slug}`}>{post.data.title}</a></h2>
				<time datetime={post.data.publishDate.toISOString()}>
					{Intl.DateTimeFormat(undefined, {
						year: "numeric", month: "short", day: "2-digit"
					}).format(post.data.publishDate)}
				</time>
				<summary>{post.data.summary}</summary>
				<ul>
					{post.data.tags.map(tag => <li><a href={`/blog/tags/${tag}`}>{tag}</a></li>)}
				</ul>
			</section>
		})}
		</div>
	</main>
</Common>
